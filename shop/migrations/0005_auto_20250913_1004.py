# Generated by Django 5.2.5 on 2025-09-13 10:04

from django.db import migrations


def update_scheduled_to_pending(apps, schema_editor):
    """Update existing 'scheduled' appointments to 'pending' for consistency"""
    Appointment = apps.get_model('shop', 'Appointment')
    
    # Update all scheduled appointments to pending
    updated_count = Appointment.objects.filter(status='scheduled').update(status='pending')
    print(f"Updated {updated_count} appointments from 'scheduled' to 'pending'")


def reverse_pending_to_scheduled(apps, schema_editor):
    """Reverse migration - update 'pending' back to 'scheduled'"""
    Appointment = apps.get_model('shop', 'Appointment')
    
    # Update all pending appointments back to scheduled
    updated_count = Appointment.objects.filter(status='pending').update(status='scheduled')
    print(f"Reverted {updated_count} appointments from 'pending' to 'scheduled'")


class Migration(migrations.Migration):

    dependencies = [
        ('shop', '0004_alter_repairorder_tax_percent'),
    ]

    operations = [
        migrations.RunPython(update_scheduled_to_pending, reverse_pending_to_scheduled),
    ]
